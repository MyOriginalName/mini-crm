# API Endpoints Mini-CRM

## Аутентификация
- POST /api/v1/register
  - Регистрация нового пользователя
  - Принимает данные пользователя (email, имя, пароль)
  - Возвращает данные пользователя

- POST /api/v1/login
  - Аутентификация пользователя
  - Принимает email и пароль
  - Возвращает токен и данные пользователя

- POST /api/v1/logout
  - Выход пользователя из системы
  - Требует аутентификации
  - Инвалидирует текущий токен

- GET /api/v1/user
  - Получение данных текущего пользователя
  - Требует аутентификации

## Верификация email
- GET /verify-email
  - Страница верификации email
  - Требует аутентификации

- GET /verify-email/{id}/{hash}
  - Подтверждение email
  - Требует аутентификации

- POST /email/verification-notification
  - Отправка повторного письма верификации
  - Требует аутентификации

## Сброс пароля
- GET /forgot-password
  - Страница запроса сброса пароля

- POST /forgot-password
  - Отправка ссылки для сброса пароля
  - Принимает email

- GET /reset-password/{token}
  - Страница сброса пароля

- POST /reset-password
  - Установка нового пароля
  - Принимает токен и новый пароль

## Пользователи
- GET /api/users
  - Получение списка пользователей
  - Поддерживает пагинацию и фильтрацию
  - Требует прав администратора

- POST /api/users
  - Создание нового пользователя
  - Принимает данные пользователя (email, имя, пароль, роль)
  - Требует прав администратора

- GET /api/users/{id}
  - Получение информации о конкретном пользователе
  - Возвращает детальные данные пользователя

- PUT /api/users/{id}
  - Обновление данных пользователя
  - Принимает обновляемые поля
  - Требует прав администратора или самого пользователя

- DELETE /api/users/{id}
  - Удаление пользователя
  - Требует прав администратора

## Клиенты
- GET /api/v1/clients
  - Получение списка клиентов
  - Требует аутентификации
  - Поддерживает пагинацию и фильтрацию

- POST /api/v1/clients
  - Создание нового клиента
  - Требует аутентификации
  - Принимает данные клиента

- GET /api/v1/clients/{id}
  - Получение информации о клиенте
  - Требует аутентификации

- PUT /api/v1/clients/{id}
  - Обновление данных клиента
  - Требует аутентификации

- DELETE /api/v1/clients/{id}
  - Удаление клиента
  - Требует аутентификации

- GET /api/v1/clients/export
  - Экспорт списка клиентов
  - Требует аутентификации

- GET /api/v1/clients/widget
  - Получение данных для виджета клиентов
  - Требует аутентификации

- POST /api/v1/clients/widget
  - Сохранение данных виджета клиентов
  - Требует аутентификации

- PUT /api/v1/clients/{client}/tags
  - Обновление тегов клиента
  - Требует аутентификации

## Задачи
- GET /api/v1/tasks
  - Получение списка задач
  - Требует аутентификации
  - Поддерживает пагинацию и фильтрацию

- POST /api/v1/tasks
  - Создание новой задачи
  - Требует аутентификации
  - Принимает данные задачи

- GET /api/v1/tasks/{id}
  - Получение информации о задаче
  - Требует аутентификации

- PUT /api/v1/tasks/{id}
  - Обновление данных задачи
  - Требует аутентификации

- DELETE /api/v1/tasks/{id}
  - Удаление задачи
  - Требует аутентификации

## Сделки
- GET /api/v1/deals
  - Получение списка сделок
  - Требует аутентификации
  - Поддерживает пагинацию и фильтрацию

- POST /api/v1/deals
  - Создание новой сделки
  - Требует аутентификации
  - Принимает данные сделки

- GET /api/v1/deals/{id}
  - Получение информации о сделке
  - Требует аутентификации

- PUT /api/v1/deals/{id}
  - Обновление данных сделки
  - Требует аутентификации

- PATCH /api/v1/deals/{id}
  - Частичное обновление сделки
  - Требует аутентификации

- DELETE /api/v1/deals/{id}
  - Удаление сделки
  - Требует аутентификации

- PUT /api/v1/deals/{deal}/status
  - Обновление статуса сделки
  - Требует аутентификации

## Проекты
- GET /api/projects
  - Получение списка проектов
  - Поддерживает пагинацию и фильтрацию по статусу
  - Доступно авторизованным пользователям

- POST /api/projects
  - Создание нового проекта
  - Принимает данные проекта (название, описание, клиент, сроки)
  - Требует прав менеджера или администратора

- GET /api/projects/{id}
  - Получение информации о конкретном проекте
  - Возвращает детальные данные проекта и связанные задачи

- PUT /api/projects/{id}
  - Обновление данных проекта
  - Принимает обновляемые поля
  - Требует прав менеджера или администратора

- DELETE /api/projects/{id}
  - Удаление проекта
  - Требует прав администратора

## Дополнительные эндпоинты
[Будет заполнено по мере развития проекта]

Административные маршруты:
GET /admin - Главная страница админ-панели (перенаправление на /admin/users)
GET /admin/users - Управление пользователями
GET /admin/logs - Просмотр логов системы
GET /admin/settings - Настройки системы
GET /admin/profile - Профиль пользователя в админ-панели
PATCH /admin/profile - Обновление профиля в админ-панели
DELETE /admin/profile - Удаление профиля в админ-панели

Все административные маршруты защищены middleware 'auth', 'verified' и 'admin'.
Профиль в админ-панели сохраняет контекст административного интерфейса в отличие от обычного профиля пользователя. 